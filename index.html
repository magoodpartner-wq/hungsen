<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>115 å¼˜æ£®é£Ÿå“è¡Œ è¨‚è³¼å–®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .product-card:active { transform: scale(0.98); }
        input[type=number]::-webkit-inner-spin-button { opacity: 1; height: 30px; }
    </style>
</head>
<body class="bg-stone-50 pb-32">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const App = () => {
            const [formData, setFormData] = useState({
                name: '', phone: '', address: '', products: {}
            });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitted, setSubmitted] = useState(false);

            const FORM_URL = "https://docs.google.com/forms/u/0/d/e/1FAIpQLSdimgv8vtLEzCgBkfr2kBwuow4klWgnJ50yZMGnO1djQXCl_Q/formResponse";

            // å®Œæ•´å°æ‡‰ Google è¡¨å–®æ¬„ä½ ID èˆ‡åƒ¹æ ¼
            const categories = [
                {
                    title: "ğŸ¥œ èŠ±ç”Ÿã€ç“œå­é¡",
                    items: [
                        { id: "entry.843637178", label: "æ£—å­å¤¾ç¶œåˆå …æœ (åŠæ–¤)", price: 270 },
                        { id: "entry.612080509", label: "æ¤°æ£—å¤¾æ ¸æ¡ƒ (åŠæ–¤)", price: 270 },
                        { id: "entry.1160797451", label: "ç´…æ£—å¤¾æ ¸æ¡ƒ (åŠæ–¤)", price: 270 },
                        { id: "entry.1973732557", label: "é–‹å¿ƒæœ (åŠæ–¤)", price: 200 },
                        { id: "entry.159317544", label: "é–‹å¿ƒæœ (æ–¤)", price: 380 },
                        { id: "entry.1933751078", label: "ç„¦ç³–è‘µç“œå­ (æ–¤)", price: 140 },
                        { id: "entry.1689163411", label: "ç´…æ£—è‘µç“œå­ (æ–¤)", price: 150 },
                        { id: "entry.1600471384", label: "èŠ±ç”Ÿé…¥å¿ƒç³– (åŠæ–¤)", price: 100 },
                        { id: "entry.1865131389", label: "é»‘èŠéº»é…¥å¿ƒç³– (åŠæ–¤)", price: 100 },
                        { id: "entry.692730322", label: "å¸¶æ®¼æä»æœ (æ–¤)", price: 280 },
                        { id: "entry.852648668", label: "é»‘é‡‘å‰›èŠ±ç”Ÿ (æ–¤)", price: 200 },
                        { id: "entry.1658185814", label: "ç”œé¦™åœ’å—æ£—æ ¸æ¡ƒç³• (1kg)", price: 350 },
                        { id: "entry.1524292667", label: "ç¶œåˆè”¬æœè„†ç‰‡ (åŒ…)", price: 140 },
                        { id: "entry.2021123749", label: "çƒ˜ç„™ç¶œåˆå …æœ (400g)", price: 350 },
                    ]
                },
                {
                    title: "ğŸ é¦™è‡èœœé¤èˆ‡æµ·å‘³é¡",
                    items: [
                        { id: "entry.325386773", label: "åŸ”é‡Œä¸­é¦™è‡ (150g)", price: 400 },
                        { id: "entry.596443511", label: "å°ç£èŠ­æ¨‚ä¹¾ (åŒ…)", price: 140 },
                        { id: "entry.233027444", label: "å°ç£èŠ’æœä¹¾ (åŒ…)", price: 240 },
                        { id: "entry.2071481523", label: "å°ç£æƒ…äººæœ (åŒ…)", price: 190 },
                        { id: "entry.673916943", label: "å°ç£ç´…å¿ƒèŠ­æ¨‚ (åŒ…)", price: 190 },
                        { id: "entry.125669254", label: "èœœæŸ‘æ©˜ç“£ (åŒ…)", price: 190 },
                        { id: "entry.1033262094", label: "é¦™æ©™æ¡”ç‰‡ (åŒ…)", price: 140 },
                        { id: "entry.1377625744", label: "å°ç£è‰è“ä¹¾ (åŒ…)", price: 140 },
                        { id: "entry.1682003617", label: "å°ç£æ°´èœœæ¡ƒ (åŒ…)", price: 190 },
                        { id: "entry.512082226", label: "è’œå‘³è±¬è‚‰æ¢ (åŠæ–¤)", price: 300 },
                        { id: "entry.1070018511", label: "æ¢…æœ‰èŠ’æœ (åŒ…)", price: 150 },
                        { id: "entry.19257553", label: "æ³°åœ‹èŠ’æœä¹¾ (åŠæ–¤)", price: 180 },
                        { id: "entry.303684893", label: "é¾œè‹“è†è»Ÿç³– (åŠæ–¤)", price: 100 },
                        { id: "entry.436533903", label: "èœœæ±ç­·è±¬è‚‰æ¢å­ (åŠæ–¤)", price: 260 },
                        { id: "entry.1238150232", label: "ä¸€å£çƒé­šå­ (100g)", price: 450 },
                        { id: "entry.1443317350", label: "ç‰¹ç´šçƒé­šå­ (5å…©)", price: 600 },
                        { id: "entry.138509701", label: "åšæ’•é­·é­šçµ² (åŠæ–¤)", price: 320 },
                        { id: "entry.2139313030", label: "é®ªé­šç³– (250g)", price: 180 },
                        { id: "entry.714684932", label: "éº»è¾£é±ˆé­šåˆ‡ç‰‡ (250g)", price: 180 },
                        { id: "entry.441790418", label: "èµ·å¸è±¬è‚‰ä¹¾ (åŠæ–¤)", price: 320 },
                        { id: "entry.1539316366", label: "æä»å°é­šä¹¾ (åŠæ–¤)", price: 300 },
                        { id: "entry.1159537493", label: "é»‘èŠéº»å¤¾å¿ƒé±ˆé­šçµ² (250g)", price: 180 },
                        { id: "entry.1335877443", label: "æ˜†å¸ƒç³– (250g)", price: 200 },
                        { id: "entry.1885206280", label: "ç‚­çƒ¤é­·é­šçµ² (åŠæ–¤)", price: 320 },
                        { id: "entry.1259240547", label: "åŸå‘³é­·é­šçµ² (åŠæ–¤)", price: 320 },
                        { id: "entry.2145456415", label: "ç‚­çƒ¤é­·é­šç‰‡ (åŠæ–¤)", price: 320 },
                        { id: "entry.440048611", label: "é£›å·ç‰‡ (66g)", price: 188 },
                        { id: "entry.1705265185", label: "ç‰›è‚‰ä¹¾ (600g)", price: 680 },
                        { id: "entry.1644220258", label: "è’Ÿè’»æ¢ äº”é¦™ (200g)", price: 150 },
                        { id: "entry.1787204500", label: "è’Ÿè’»æ¢ éº»è¾£ (200g)", price: 150 },
                        { id: "entry.89858878", label: "è’Ÿè’»ç‰‡ äº”é¦™ (200g)", price: 150 },
                        { id: "entry.1578736866", label: "è’Ÿè’»ç‰‡ éº»è¾£ (200g)", price: 150 },
                        { id: "entry.155109952", label: "é‡‘æ¡”é¤… (350g)", price: 150 },
                        { id: "entry.1691677370", label: "ä¸­è—¥åŒ–æ ¸æ©„æ¬– (350g)", price: 150 },
                        { id: "entry.87483775", label: "ç™½ç“œå­ (600g)", price: 200 },
                        { id: "entry.1930293217", label: "å¤§è±¬å…¬ (600g)", price: 250 },
                    ]
                }
            ];

            const totalAmount = useMemo(() => {
                let total = 0;
                categories.forEach(cat => {
                    cat.items.forEach(item => {
                        const qty = parseInt(formData.products[item.id] || 0);
                        total += qty * item.price;
                    });
                });
                return total;
            }, [formData.products]);

            const handleQtyChange = (id, val) => {
                const qty = val === '' ? 0 : Math.max(0, parseInt(val));
                setFormData(prev => ({
                    ...prev,
                    products: { ...prev.products, [id]: qty }
                }));
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (totalAmount === 0) return alert("æé†’æ‚¨ï¼šè«‹è‡³å°‘é¸æ“‡ä¸€å€‹å•†å“å–”ï¼");
                
                setIsSubmitting(true);
                const queryParams = new URLSearchParams();
                queryParams.append("entry.52584133", formData.name);
                queryParams.append("entry.1371524261", formData.phone);
                queryParams.append("entry.1915967422", formData.address);
                
                Object.keys(formData.products).forEach(id => {
                    if (formData.products[id] > 0) {
                        queryParams.append(id, formData.products[id]);
                    }
                });

                // ä½¿ç”¨éš±è— iframe æäº¤ä»¥é¿å…è·³è½‰
                const iframe = document.createElement('iframe');
                iframe.name = "hidden_confirm";
                iframe.style.display = "none";
                document.body.appendChild(iframe);

                const form = document.createElement('form');
                form.method = "POST";
                form.action = FORM_URL;
                form.target = "hidden_confirm";

                for (let [key, value] of queryParams.entries()) {
                    const input = document.createElement('input');
                    input.type = "hidden"; input.name = key; input.value = value;
                    form.appendChild(input);
                }

                document.body.appendChild(form);
                form.submit();

                setTimeout(() => {
                    setSubmitted(true);
                    window.scrollTo(0,0);
                }, 1000);
            };

            if (submitted) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-6 text-center">
                        <div className="bg-white p-10 rounded-3xl shadow-2xl max-w-sm w-full border-t-8 border-orange-600">
                            <div className="text-6xl mb-4 text-orange-500">ğŸ¥¨</div>
                            <h2 className="text-2xl font-black text-stone-800 mb-2">è¨‚è³¼æˆåŠŸï¼</h2>
                            <p className="text-stone-500 mb-6">å·²æ”¶åˆ°æ‚¨çš„è¨‚å–®<br/>ç¸½é‡‘é¡ï¼š<span className="text-red-600 font-bold text-xl">${totalAmount}</span></p>
                            <button onClick={() => window.location.reload()} className="w-full bg-orange-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-orange-700 transition-all">è¿”å›</button>
                        </div>
                    </div>
                );
            }

            return (
                <div>
                    {/* Header */}
                    <div className="bg-stone-800 text-white py-12 px-6 text-center shadow-lg border-b-4 border-orange-600">
                        <h1 className="text-3xl md:text-5xl font-black mb-2 tracking-tighter">115 å¼˜æ£®é£Ÿå“è¡Œ</h1>
                        <p className="text-orange-400 font-bold tracking-widest text-sm md:text-base">åš´é¸é«˜å“è³ªé£Ÿå“ â€§ å‚³çµ±å¥½æ»‹å‘³</p>
                    </div>

                    <div className="max-w-4xl mx-auto -mt-6 px-4">
                        <form onSubmit={handleSubmit} className="space-y-6">
                            {/* å®¢æˆ¶è³‡è¨Š */}
                            <section className="bg-white p-6 rounded-3xl shadow-md border-l-8 border-orange-500">
                                <h2 className="text-lg font-black text-stone-800 mb-4 flex items-center">
                                    <span className="bg-orange-100 p-2 rounded-lg mr-2">ğŸ‘¤</span> è¨‚è³¼äººè³‡æ–™
                                </h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <input type="text" required placeholder="å§“å *" className="w-full bg-stone-50 border-2 border-stone-100 p-3 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none" 
                                        onChange={e => setFormData({...formData, name: e.target.value})} />
                                    <input type="tel" required placeholder="é›»è©± *" className="w-full bg-stone-50 border-2 border-stone-100 p-3 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none" 
                                        onChange={e => setFormData({...formData, phone: e.target.value})} />
                                    <input type="text" placeholder="äº¤è²¨åœ°å€ (é¸å¡«)" className="w-full bg-stone-50 border-2 border-stone-100 p-3 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none md:col-span-2" 
                                        onChange={e => setFormData({...formData, address: e.target.value})} />
                                </div>
                            </section>

                            {/* ç”¢å“æ¸…å–® */}
                            {categories.map((cat, idx) => (
                                <section key={idx} className="bg-white rounded-3xl shadow-md overflow-hidden">
                                    <div className="bg-stone-100 px-6 py-3 font-black text-stone-700">{cat.title}</div>
                                    <div className="divide-y divide-stone-50">
                                        {cat.items.map((item, i) => (
                                            <div key={i} className="p-4 flex items-center justify-between hover:bg-stone-50 transition-colors">
                                                <div className="flex-1 pr-4">
                                                    <p className="font-bold text-stone-800 text-sm md:text-base">{item.label}</p>
                                                    <p className="text-orange-600 font-bold text-sm">${item.price}</p>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <input type="number" min="0" placeholder="0" 
                                                        className="w-16 bg-stone-100 border-none p-2 rounded-lg text-center font-bold focus:ring-2 focus:ring-orange-500 outline-none"
                                                        onChange={e => handleQtyChange(item.id, e.target.value)} />
                                                    <span className="w-16 text-right text-stone-400 font-mono text-xs hidden md:block">
                                                        ${(formData.products[item.id] || 0) * item.price}
                                                    </span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </section>
                            ))}

                            {/* æäº¤æŒ‰éˆ• */}
                            <button type="submit" disabled={isSubmitting}
                                class="w-full bg-orange-600 text-white text-xl font-black py-5 rounded-3xl shadow-xl hover:bg-orange-700 active:scale-95 transition-all">
                                {isSubmitting ? "è¨‚å–®å‚³é€ä¸­..." : "ç¢ºèªä¸‹å–®æäº¤"}
                            </button>
                        </form>
                    </div>

                    {/* åº•éƒ¨ç¸½è¨ˆæµ®å‹•åˆ— */}
                    <div className="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-stone-200 px-8 py-4 shadow-[0_-10px_20px_rgba(0,0,0,0.05)] flex items-center justify-between z-50">
                        <div>
                            <p className="text-xs text-stone-500 font-bold">ç›®å‰é‡‘é¡ç¸½è¨ˆ</p>
                            <p className="text-3xl font-black text-red-600">${totalAmount}</p>
                        </div>
                        <div className="text-right">
                            <p className="text-[10px] text-stone-400 font-bold">å¼˜æ£®é£Ÿå“è¡Œ</p>
                            <p className="text-[10px] text-stone-400 font-bold italic underline">è¨‚è³¼å°ˆç”¨</p>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


