<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>115 å¼˜æ£®é£Ÿå“è¡Œ è¨‚è³¼å–®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { opacity: 1; }
    </style>
</head>
<body class="bg-orange-50 pb-32">

    <header class="bg-gradient-to-r from-red-800 to-red-600 text-white py-12 px-6 text-center shadow-xl">
        <h1 class="text-4xl md:text-5xl font-black mb-2">115 å¼˜æ£®é£Ÿå“è¡Œ</h1>
        <p class="text-lg opacity-90 tracking-widest font-bold">åš´é¸é«˜å“è³ªé£Ÿå“</p>
        <div class="mt-4 inline-block bg-white text-red-700 px-4 py-1 rounded-full text-sm font-bold shadow-sm">
            è«‹è¼¸å…¥æ•¸é‡å³å¯è‡ªå‹•è¨ˆç®—
        </div>
    </header>

    <main class="max-w-4xl mx-auto -mt-10 px-4">
        <div id="successMessage" class="hidden bg-white p-10 rounded-3xl shadow-2xl border-t-8 border-red-600 text-center mb-10">
            <div class="text-6xl mb-4">ğŸ‰</div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">è¨‚å–®å·²é€å‡º</h2>
            <p class="text-gray-600 mb-6">å·²æ”¶åˆ°æ‚¨çš„è¨‚è³¼ï¼Œå°‡ç›¡å¿«ç‚ºæ‚¨è™•ç†ã€‚</p>
            <button onclick="window.location.reload()" class="w-full bg-red-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-red-700 transition-all">
                å†æ¬¡å¡«å¯«
            </button>
        </div>

        <form id="orderForm" class="space-y-8">
            <section class="bg-white p-6 md:p-8 rounded-3xl shadow-lg border-l-8 border-orange-500">
                <h3 class="text-xl font-bold mb-6 text-gray-800 flex items-center">
                    <span class="bg-orange-100 p-2 rounded-lg mr-3">ğŸ“¦</span> è¨‚è³¼è³‡è¨Š
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">è¨‚è³¼äººå§“å *</label>
                        <input type="text" name="entry.52584133" required placeholder="è«‹è¼¸å…¥å§“å"
                            class="w-full bg-gray-50 border-2 border-gray-100 p-4 rounded-2xl focus:ring-2 focus:ring-orange-500 outline-none transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-1">è¯çµ¡é›»è©± *</label>
                        <input type="tel" name="entry.1371524261" required placeholder="æ‰‹æ©Ÿæˆ–å¸‚è©±"
                            class="w-full bg-gray-50 border-2 border-gray-100 p-4 rounded-2xl focus:ring-2 focus:ring-orange-500 outline-none transition-all">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold text-gray-700 mb-1">äº¤è²¨åœ°å€</label>
                        <input type="text" name="entry.1915967422" placeholder="è«‹è¼¸å…¥æ”¶è²¨åœ°å€"
                            class="w-full bg-gray-50 border-2 border-gray-100 p-4 rounded-2xl focus:ring-2 focus:ring-orange-500 outline-none transition-all">
                    </div>
                </div>
            </section>

            <div id="productSections" class="space-y-8"></div>

            <button type="submit" id="submitBtn"
                class="w-full bg-red-600 text-white text-2xl font-black py-6 rounded-3xl shadow-2xl hover:bg-red-700 transform hover:-translate-y-1 transition-all active:scale-95">
                ç¢ºèªé€å‡ºè¨‚å–®
            </button>
        </form>
    </main>

    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-4 shadow-[0_-10px_20px_rgba(0,0,0,0.1)] flex items-center justify-between z-50">
        <div class="flex flex-col">
          <span class="text-gray-500 text-xs font-bold">ç›®å‰è¨‚è³¼ç¸½é‡‘é¡</span>
          <span class="text-3xl font-black text-red-600" id="totalDisplay">$0</span>
        </div>
        <div class="text-right hidden sm:block">
          <p class="text-xs text-gray-400 font-bold">æŸä»è³¼ç‰©å•†åŸ â€§ èª ä¿¡å‡ºå“</p>
        </div>
    </div>

    <iframe name="hidden_confirm" id="hidden_confirm" style="display:none;"></iframe>

    <script>
        const FORM_ACTION = "https://docs.google.com/forms/u/0/d/e/1FAIpQLSdimgv8vtLEzCgBkfr2kBwuow4klWgnJ50yZMGnO1djQXCl_Q/formResponse";

        const products = [
            {
                category: "èŠ±ç”Ÿã€ç“œå­é¡",
                items: [
                    { label: "æ£—å­å¤¾ç¶œåˆå …æœ (åŠæ–¤)", price: 270, id: "entry.843637178" },
                    { label: "æ¤°æ£—å¤¾æ ¸æ¡ƒ (åŠæ–¤)", price: 270, id: "entry.612080509" },
                    { label: "ç´…æ£—å¤¾æ ¸æ¡ƒ (åŠæ–¤)", price: 270, id: "entry.1160797451" },
                    { label: "é–‹å¿ƒæœ (åŠæ–¤)", price: 200, id: "entry.1973732557" },
                    { label: "é–‹å¿ƒæœ (æ–¤)", price: 380, id: "entry.159317544" },
                    { label: "ç„¦ç³–è‘µç“œå­ (æ–¤)", price: 140, id: "entry.1933751078" },
                    { label: "ç´…æ£—è‘µç“œå­ (æ–¤)", price: 150, id: "entry.1689163411" },
                    { label: "èŠ±ç”Ÿé…¥å¿ƒç³– (åŠæ–¤)", price: 100, id: "entry.1600471384" },
                    { label: "é»‘èŠéº»é…¥å¿ƒç³– (åŠæ–¤)", price: 100, id: "entry.1865131389" },
                    { label: "å¸¶æ®¼æä»æœ (æ–¤)", price: 280, id: "entry.692730322" },
                    { label: "é»‘é‡‘å‰›èŠ±ç”Ÿ (æ–¤)", price: 200, id: "entry.852648668" },
                    { label: "ç”œé¦™åœ’å—æ£—æ ¸æ¡ƒç³• (1kg)", price: 350, id: "entry.1658185814" },
                    { label: "ç¶œåˆè”¬æœè„†ç‰‡ (åŒ…)", price: 140, id: "entry.1524292667" },
                    { label: "çƒ˜ç„™ç¶œåˆå …æœ (400g)", price: 350, id: "entry.2021123749" }
                ]
            },
            {
                category: "é¦™è‡èœœé¤ã€æµ·å‘³é¡",
                items: [
                    { label: "åŸ”é‡Œä¸­é¦™è‡ (150g)", price: 400, id: "entry.325386773" },
                    { label: "å°ç£èŠ­æ¨‚ä¹¾ (åŒ…)", price: 140, id: "entry.596443511" },
                    { label: "å°ç£èŠ’æœä¹¾ (åŒ…)", price: 240, id: "entry.233027444" },
                    { label: "å°ç£æƒ…äººæœ (åŒ…)", price: 190, id: "entry.2071481523" },
                    { label: "å°ç£ç´…å¿ƒèŠ­æ¨‚ (åŒ…)", price: 190, id: "entry.673916943" },
                    { label: "èœœæŸ‘æ©˜ç“£ (åŒ…)", price: 190, id: "entry.125669254" },
                    { label: "é¦™æ©™æ¡”ç‰‡ (åŒ…)", price: 140, id: "entry.1033262094" },
                    { label: "å°ç£è‰è“ä¹¾ (åŒ…)", price: 140, id: "entry.1377625744" },
                    { label: "å°ç£æ°´èœœæ¡ƒ (åŒ…)", price: 190, id: "entry.1682003617" },
                    { label: "è’œå‘³è±¬è‚‰æ¢ (åŠæ–¤)", price: 300, id: "entry.512082226" },
                    { label: "æ¢…æœ‰èŠ’æœ (åŒ…)", price: 150, id: "entry.1070018511" },
                    { label: "æ³°åœ‹èŠ’æœä¹¾ (åŠæ–¤)", price: 180, id: "entry.19257553" },
                    { label: "é¾œè‹“è†è»Ÿç³– (åŠæ–¤)", price: 100, id: "entry.303684893" },
                    { label: "èœœæ±ç­·è±¬è‚‰æ¢å­ (åŠæ–¤)", price: 260, id: "entry.436533903" },
                    { label: "ä¸€å£çƒé­šå­ (100g)", price: 450, id: "entry.1238150232" },
                    { label: "ç‰¹ç´šçƒé­šå­ (5å…©)", price: 600, id: "entry.1443317350" },
                    { label: "åšæ’•é­·é­šçµ² (åŠæ–¤)", price: 320, id: "entry.138509701" },
                    { label: "é£›å·ç‰‡ (66g)", price: 188, id: "entry.440048611" },
                    { label: "ç‰›è‚‰ä¹¾ (1æ–¤)", price: 680, id: "entry.1705265185" },
                    { label: "è’Ÿè’»æ¢ äº”é¦™ (200g)", price: 150, id: "entry.1644220258" },
                    { label: "è’Ÿè’»æ¢ éº»è¾£ (200g)", price: 150, id: "entry.1787204500" },
                    { label: "è’Ÿè’»ç‰‡ äº”é¦™ (200g)", price: 150, id: "entry.89858878" },
                    { label: "è’Ÿè’»ç‰‡ éº»è¾£ (200g)", price: 150, id: "entry.1578736866" },
                    { label: "é‡‘æ¡”ç³– (350g)", price: 150, id: "entry.155109952" },
                    { label: "ä¸­è—¥åŒ–æ ¸æ©„æ¬– (350g)", price: 150, id: "entry.1691677370" }
                ]
            }
        ];

        // åˆå§‹åŒ–æ¸²æŸ“ç”¢å“
        const container = document.getElementById('productSections');
        products.forEach(cat => {
            let html = `<div class="bg-white rounded-3xl shadow-lg overflow-hidden">
                            <div class="bg-gray-100 px-8 py-4 font-bold text-gray-700 text-lg">${cat.category}</div>
                            <div class="divide-y divide-gray-100">`;
            cat.items.forEach(item => {
                html += `
                    <div class="p-4 md:p-6 flex flex-wrap items-center justify-between hover:bg-orange-50 transition-colors">
                        <div class="flex-1 min-w-[180px]">
                            <p class="font-bold text-gray-800">${item.label}</p>
                            <p class="text-red-500 font-bold">$${item.price}</p>
                        </div>
                        <div class="flex items-center space-x-4 mt-2 md:mt-0">
                            <input type="number" name="${item.id}" min="0" placeholder="0" data-price="${item.price}"
                                class="product-qty w-20 bg-gray-100 border-none p-3 rounded-xl text-center font-bold focus:ring-2 focus:ring-red-500 outline-none">
                            <div class="w-20 text-right text-gray-400 font-mono font-bold subtotal">$0</div>
                        </div>
                    </div>`;
            });
            html += `</div></div>`;
            container.innerHTML += html;
        });

        // è‡ªå‹•è¨ˆç®—é‚è¼¯
        const qtyInputs = document.querySelectorAll('.product-qty');
        const totalDisplay = document.getElementById('totalDisplay');

        function calculateTotal() {
            let total = 0;
            qtyInputs.forEach(input => {
                const qty = parseInt(input.value) || 0;
                const price = parseInt(input.dataset.price);
                const subtotal = qty * price;
                input.nextElementSibling.innerText = `$${subtotal}`;
                total += subtotal;
            });
            totalDisplay.innerText = `$${total}`;
            return total;
        }

        qtyInputs.forEach(input => {
            input.addEventListener('input', calculateTotal);
        });

        // è¡¨å–®æäº¤è™•ç†
        const form = document.getElementById('orderForm');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const total = calculateTotal();

            if (total === 0) {
                alert("å¤§ä»å“¥æé†’æ‚¨ï¼šè«‹è‡³å°‘é¸æ“‡ä¸€é …å•†å“å†é€å‡ºå–”ï¼");
                return;
            }

            // ä½¿ç”¨ FormData æäº¤åˆ°éš±è—çš„ Iframe
            const formData = new FormData(form);
            const actionUrl = FORM_ACTION;
            
            // å‹•æ…‹å‰µå»ºä¸€å€‹è¡¨å–®ä¸¦æäº¤
            const hiddenForm = document.createElement('form');
            hiddenForm.method = 'POST';
            hiddenForm.action = actionUrl;
            hiddenForm.target = 'hidden_confirm';

            for (let [key, value] of formData.entries()) {
                if (value !== "" && value !== "0") {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = value;
                    hiddenForm.appendChild(input);
                }
            }

            document.body.appendChild(hiddenForm);
            hiddenForm.submit();
            document.body.removeChild(hiddenForm);

            // é¡¯ç¤ºæˆåŠŸç•«é¢
            form.classList.add('hidden');
            document.getElementById('successMessage').classList.remove('hidden');
            document.querySelector('header').classList.add('hidden');
            window.scrollTo(0, 0);
        });
    </script>
</body>

</html>

